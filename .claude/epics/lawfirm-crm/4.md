---
name: 数据库设计和核心模型实现
status: open
created: 2025-09-02T09:58:12Z
updated: 2025-09-02T10:13:25Z
github: https://github.com/fakechris/lawcase-bench/issues/4
depends_on: [3]
parallel: false
conflicts_with: []
---

# Task: 数据库设计和核心模型实现

## Description

设计并实现数据库schema，定义核心业务实体和关系，使用Prisma ORM管理数据库。

## Acceptance Criteria

- [ ] 完成数据库ER图设计
- [ ] 使用Prisma定义所有核心模型
- [ ] 实现数据库迁移脚本
- [ ] 创建种子数据填充脚本
- [ ] 编写数据库单元测试

## Technical Details

### 核心实体设计

- User（用户）- Role（角色）- Permission（权限）
- Lead（线索）- Customer（客户）- Case（案件）
- Contract（合同）- Payment（付款）- Refund（退款）
- Document（文档）- Communication（沟通记录）

### 关键字段

- 状态机：status字段和状态流转规则
- 时间戳：created_at, updated_at, deleted_at
- 关联关系：外键约束和级联删除
- 索引优化：查询频繁的字段建立索引

## Dependencies

- [ ] Task 001: 项目初始化完成

## Effort Estimate

- Size: L
- Hours: 60
- Parallel: false

## Definition of Done

- [ ] 数据库设计文档完成
- [ ] Prisma schema文件完成
- [ ] 数据库迁移成功执行
- [ ] 种子数据可以正常加载
- [ ] 相关测试通过
